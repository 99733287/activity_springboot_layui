<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>天天活动-用户中心</title>
    <link rel="stylesheet" href="res/layui/css/layui.css">
    <link rel="stylesheet" href="res/css/global.css">
</head>
<body class="">
<div class="my-nav layui-bg-cyan">
    <div class="layui-fluid">
        <ul class="layui-nav layui-bg-cyan" lay-filter="">
            <li class="layui-nav-item"><a href="index.html">主页</a></li>
            <li class="layui-nav-item"><a href="act-list.html">活动列表</a></li>
            <li class="layui-nav-item"><a href="act-create.html">发布活动</a></li>
            <li class="layui-nav-item "><a href="user.html">个人中心</a></li>
        </ul>
    </div>

</div>
<div class="layui-fluid" style="margin-top: 50px">
</div>
<div class="layui-fluid">
    <fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
        <legend>用户资料</legend>
    </fieldset>
    <div style="padding: 0 15px">
        <table class="layui-table">
            <thead>
            <th>用户名</th>
            <th>姓名</th>
            <th>手机号</th>
            <th>邮箱</th>
            <th>出生日期</th>
            </thead>
            <tbody>
            <tr>
                <td id="username">ucpeo</td>
                <td id="fullName">youyouyu</td>
                <td id="phone">1320619254</td>
                <td id="email">99733287@qq.com</td>
                <td id="birthday">2020-1-1</td>
            </tr>
            </tbody>
        </table>
        <fieldset class="layui-elem-field site-demo-button" style="margin-top: 30px;padding: 20px 15px">
            <legend>功能管理</legend>
            <div>
                <a type="button" href="act-create.html" class="layui-btn layui-btn-primary">创建活动</a>
                <a href="my-partake.html"  class="layui-btn layui-btn-primary">我的参与</a>
                <a href="my-activity.html" class="layui-btn layui-btn-primary">我的主持</a>
                <a href="rest.html" class="layui-btn layui-btn-primary">修改密码</a>
                <a href="/user/logout"  class="layui-btn layui-btn-primary">退出登录</a>
            </div>
        </fieldset>
    </div>

    <div class="fix-card layui-card">
        <div class="layui-card-header">
            我参与的活动
        </div>
        <div class="layui-card-body">
            <ul class="my-part-list">
            </ul>

        </div>
    </div>
    <div class="fix-card layui-card">
        <div class="layui-card-header">
            我发起的活动
        </div>
        <div class="layui-card-body">
            <ul class="act-list my-list">

            </ul>
        </div>
    </div>
</div>

<div class="layui-footer footer footer-index">
    <div class="layui-main">
        <p>© 2020 <a href="http://5keo.com">5keo.com|yuyoyo.cn</a> 201758274050</p>
        <p>
            <a href="http://www.cqwu.net" target="_blank">重庆文理学院</a>
            <a href="404.html" target="_blank">重庆文理学院-软件工程学院</a>
            <a href="http://www.github.com/" target="_blank" class="layui-hide-xs">GitHub</a>
            <a href="http://www.miitbeian.gov.cn/" target="_blank" rel="nofollow">XXXXX001</a>
        </p>
        <div class="site-union">
            <p class="site-union-desc">
        <span>
          感谢各位老师的教导
        </span>
            </p>
            <p>
                <a href="404.html">XXX老师</a>
                <a href="404.html">XXX老师</a>
                <a href="404.html">XXX老师</a>
            </p>
        </div>
    </div>
</div>

<script src="res/layui/layui.all.js"></script>
<script src="res/js/utils.js"></script>
<script>
    var $ = layui.jquery;
    $(document).ready(function () {
        getMyPartakes(function (data) {
            if (data.code === 0) {
                var parts = data.data;
                parts.forEach(function (data) {
                    if (data.act == null)
                        return;
                    $(".my-part-list").append(createPartDom(data));
                });


            }
        });
        $.ajax({
            url: "/act/myList",
            success: function (data) {
                if (data.code === 0) {
                    var acts = data.data;
                    for (let i = 0; i < acts.length; i++) {
                        $(".act-list.my-list").append(createActDom(acts[i]))
                    }
                }
            },
            error: function () {

            }
        });
        getMyInfo(function (data) {
            if (data.code !== 0) {
                return;
            }
            var userInfo = data.data;
            $("#username").text(userInfo.username);
            $("#fullName").text(userInfo.fullName);
            $("#phone").text(userInfo.phone);
            $("#email").text(userInfo.email);
            $("#birthday").text(layui.util.toDateString(userInfo.birthday, "yyyy-MM-dd"));
        });
    });
</script>
</body>
</html>